<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <title>Insert — insertar cadena en posición</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 28px;
            background: #f7fbff
        }

        .card {
            max-width: 820px;
            margin: 0 auto;
            background: #fff;
            padding: 18px;
            border-radius: 10px;
            box-shadow: 0 8px 24px rgba(12, 40, 80, 0.06)
        }

        h1 {
            margin: 0 0 8px;
            font-size: 20px
        }

        label {
            display: block;
            margin: 10px 0 6px;
            font-weight: 600
        }

        input[type=text],
        textarea {
            width: 100%;
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #e6eefb
        }

        .row {
            display: flex;
            gap: 8px;
            margin-top: 8px
        }

        button {
            padding: 8px 12px;
            border-radius: 8px;
            border: 0;
            background: #2563eb;
            color: #fff;
            cursor: pointer
        }

        pre {
            background: #f3f7ff;
            padding: 12px;
            border-radius: 8px;
            overflow: auto
        }

        .muted {
            color: #556;
            font-size: 13px
        }
    </style>
</head>

<body>
    <main class="card">
        <h1>Función <code>insert</code> — insertar una cadena dentro de otra</h1>
        <div class="muted">La posición es <strong>1-based</strong>. Por defecto la posición es 1 (inicio). Si la
            posición excede la longitud se añade al final. Se intentan añadir espacios automáticamente cuando procede.
        </div>

        <label>Cadena base</label>
        <input id="base" type="text" value="Estamos haciendo algunos ejercicios." />

        <div class="row">
            <div style="flex:1">
                <label>Cadena a insertar</label>
                <input id="ins" type="text" value="JavaScript" />
            </div>
            <div style="width:140px">
                <label>Posición (1-based)</label>
                <input id="pos" type="text" value="18" />
            </div>
        </div>

        <div style="margin-top:12px">
            <button id="run">Insertar</button>
            <button id="examples" style="background:#0ea5a4;margin-left:8px">Ver ejemplos</button>
        </div>

        <h3 style="margin-top:18px">Resultado</h3>
        <pre id="out">(aquí aparecerá el resultado)</pre>

        <h3>Función (explicada)</h3>
        <pre>// insert(str, insertStr = '', pos = 1)
// - str: cadena donde se insertará
// - insertStr: cadena que se inserta (por defecto cadena vacía — sin cambio)
// - pos: posición 1-based donde insertar (por defecto 1 -> inicio)

function insert(str, insertStr = '', pos = 1) {
  // normalizamos a string y posición entera
  str = String(str);
  insertStr = String(insertStr);
  pos = Number.isFinite(Number(pos)) ? Math.floor(Number(pos)) : 1;

  // posición 1-based -> índice 0-based
  const idx = Math.min(Math.max(0, pos - 1), str.length);
  const left = str.slice(0, idx);
  const right = str.slice(idx);

  // regla simple de espaciado: si no hay separación entre insertStr y el lado derecho,
  // añadimos un espacio intermedio cuando ambas partes lo requieren.
  let middle = insertStr;
  if (middle && right && !/\s$/.test(middle) && !/^\s/.test(right)) middle = middle + ' ';
  if (left && middle && !/\s$/.test(left) && !/^\s/.test(middle)) middle = ' ' + middle;

  return left + middle + right;
}
</pre>

        <div class="muted" style="margin-top:10px">Nota: la función intenta mantener el espaciado natural (no inserta
            doble espacio salvo que la cadena de inserción lo incluya).</div>
    </main>

    <script>
        // implementación real usada por la demo
        function insert(str, insertStr = '', pos = 1) {
            str = String(str);
            insertStr = String(insertStr);
            pos = Number.isFinite(Number(pos)) ? Math.floor(Number(pos)) : 1;
            const idx = Math.min(Math.max(0, pos - 1), str.length);
            const left = str.slice(0, idx);
            const right = str.slice(idx);

            let middle = insertStr;
            if (middle && right && !/\s$/.test(middle) && !/^\s/.test(right)) middle = middle + ' ';
            if (left && middle && !/\s$/.test(left) && !/^\s/.test(middle)) middle = ' ' + middle;

            return left + middle + right;
        }

        // DOM
        const $ = id => document.getElementById(id);
        const out = $('out');
        $('run').addEventListener('click', () => {
            const base = $('base').value;
            const ins = $('ins').value;
            const pos = $('pos').value;
            out.textContent = insert(base, ins, pos);
        });

        // ejemplos rápidos
        $('examples').addEventListener('click', () => {
            const e1 = insert('Estamos haciendo ejercicios.');
            const e2 = insert('Estamos haciendo ejercicios.', 'JavaScript');
            const e3 = insert('Estamos haciendo algunos ejercicios.', ' JavaScript', 33);
            out.textContent = '1) ' + e1 + '\n2) ' + e2 + '\n3) ' + e3;
        });

        // mostrar ejemplo inicial al cargar
        out.textContent = insert($('base').value, $('ins').value, $('pos').value);
    </script>
</body>

</html>