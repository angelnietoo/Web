<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Búsqueda de palabra</title>
    <style>
        body {
            font-family: system-ui, Arial, sans-serif;
            background: #f6f7fb;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .card {
            background: #fff;
            padding: 20px 24px;
            border-radius: 10px;
            box-shadow: 0 6px 18px rgba(15, 23, 42, .08);
            width: min(500px, 95%);
            box-sizing: border-box;
        }

        label {
            display: block;
            margin: 10px 0 6px;
            font-size: 14px;
            color: #0f172a;
        }

        textarea,
        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #e6edf3;
            border-radius: 6px;
            font-size: 14px;
            box-sizing: border-box;
            resize: vertical;
        }

        .row {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            align-items: center;
        }

        button {
            padding: 8px 10px;
            border: 0;
            border-radius: 6px;
            background: #0ea5a4;
            color: #fff;
            cursor: pointer;
        }

        button.ghost {
            background: #64748b;
        }

        pre {
            margin-top: 12px;
            padding: 10px;
            background: #fbfdff;
            border-radius: 6px;
            white-space: pre-wrap;
        }
    </style>
</head>

<body>

    <div class="card">
        <h3 style="margin:0 0 8px">Búsqueda de palabra</h3>

        <label for="text">Texto</label>
        <textarea id="text" rows="5">El zorro marrón
aa, bb, aa</textarea>

        <label for="word">Palabra a buscar</label>
        <input id="word" type="text" value="zorro">

        <div class="row">
            <button id="run">Buscar</button>
            <button id="copy" class="ghost">Copiar resultado</button>
        </div>

        <pre id="out">Pulsa "Buscar" — resultado aquí.</pre>
    </div>

    <script>
        // Busca coincidencias exactas de 'palabra' en 'texto'
        function palabra_busqueda(texto, palabra) {
            // Si la palabra es vacía o falsy devolvemos mensaje indicando 0 (evita búsquedas inválidas)
            if (!palabra) return `'${palabra}' se encontró 0 veces.`;

            // Separa el texto en tokens usando espacios y comas como separadores
            // (expresión regular: cualquier cantidad de espacios o comas)
            const palabras = texto.split(/[\s,]+/);

            // Filtra comparando exactamente (case-sensitive) y cuenta resultados
            const count = palabras.filter(p => p === palabra).length;

            // Devuelve mensaje con singular/plural correcto
            return `'${palabra}' se encontró ${count} ${count === 1 ? 'vez' : 'veces'}.`;
        }

        /* Referencias DOM */
        const T = document.getElementById('text'); // textarea con el texto a analizar
        const W = document.getElementById('word'); // input con la palabra a buscar
        const OUT = document.getElementById('out'); // elemento donde mostramos el resultado

        // Botón "Buscar": ejecuta la búsqueda y muestra el mensaje
        document.getElementById('run').onclick = () => {
            OUT.textContent = palabra_busqueda(T.value, W.value);
        };

        // Botón "Copiar resultado": intenta copiar el texto mostrado al portapapeles
        document.getElementById('copy').onclick = async () => {
            try {
                // Uso de la API moderna del portapapeles (requiere HTTPS en la mayoría de casos)
                await navigator.clipboard.writeText(OUT.textContent);

                // Mensaje temporal de confirmación y restauración del texto original
                const prev = OUT.textContent;
                OUT.textContent = 'Copiado ✓';
                setTimeout(() => OUT.textContent = prev, 900);
            } catch {
                // Fallback visual si la copia falla (permisos, entorno no seguro, etc.)
                OUT.textContent = 'No se pudo copiar';
                setTimeout(() => OUT.textContent = 'Pulsa "Buscar" — resultado aquí.', 900);
            }
        };

        // Ejecuta una búsqueda inicial al cargar para mostrar resultado por defecto
        document.getElementById('run').click();
    </script>

</body>

</html>