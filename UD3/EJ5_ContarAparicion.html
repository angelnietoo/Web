<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Contador de subcadenas — simple</title>
    <style>
        body {
            font-family: system-ui, Arial;
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f6f7fb
        }

        .card {
            width: min(720px, 96%);
            background: #fff;
            padding: 16px;
            border-radius: 10px;
            box-shadow: 0 8px 24px rgba(15, 23, 42, .06)
        }

        textarea,
        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #e6edf3;
            border-radius: 6px;
            font-size: 14px
        }

        .row {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            align-items: center
        }

        button {
            padding: 8px 10px;
            border: 0;
            border-radius: 6px;
            background: #0ea5a4;
            color: #fff;
            cursor: pointer
        }

        button.ghost {
            background: #64748b
        }

        pre {
            background: #fbfdff;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            white-space: pre-wrap
        }
    </style>
</head>

<body>
    <div class="card">
        <h3 style="margin:0 0 8px">Contador de subcadenas (no solapado)</h3>

        <label>Texto</label>
        <textarea id="text" rows="6">
            claro
        </textarea>

        <label style="margin-top:8px">Subcadena</label>
        <input id="sub" type="text" value="claro" />

        <div class="row">
            <button id="run">Contar</button>
            <button id="copy" class="ghost">Copiar resultado</button>
        </div>

        <pre id="out">Pulsa "Contar" — resultado aquí.</pre>
    </div>

    <script>
        /* Cuenta apariciones NO solapadas (case-sensitive) */
        function countNonOverlapping(hay, needle) {
            if (!needle) return 0;
            let pos = 0, count = 0, step = needle.length;
            while ((pos = hay.indexOf(needle, pos)) !== -1) {
                count++;
                pos += step;
            }
            return count;
        }

        /* DOM */
        const T = document.getElementById('text');
        const S = document.getElementById('sub');
        const OUT = document.getElementById('out');

        document.getElementById('run').onclick = () => {
            const n = countNonOverlapping(T.value, S.value);
            OUT.textContent = `Apariciones (no solapado): ${n}`;
        };

        document.getElementById('copy').onclick = async () => {
            try {
                await navigator.clipboard.writeText(OUT.textContent);
                const prev = OUT.textContent;
                OUT.textContent = 'Copiado ✓';
                setTimeout(() => OUT.textContent = prev, 900);
            } catch {
                OUT.textContent = 'No se pudo copiar';
                setTimeout(() => OUT.textContent = 'Pulsa "Contar" — resultado aquí.', 900);
            }
        };

        /* Ejecuta al cargar */
        document.getElementById('run').click();
    </script>
</body>

</html>