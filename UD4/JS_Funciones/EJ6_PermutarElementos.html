<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Ejercicio 6 - permutar</title>
    <link rel="stylesheet" href="CSS/styles.css">
</head>

<body>
    <main class="exercise">
        <h1>Ejercicio 6 — permutar</h1>

        <div class="content">
            <p>Pega un array en JSON (p. ej. <code>[1,2,3]</code>) y genera todas las permutaciones.</p>
            <label for="perm_input">Array JSON:
                <textarea id="perm_input" rows="3">[1,2,3]</textarea>
            </label>

            <pre id="out6" aria-live="polite">Salida...</pre>
        </div>

        <div class="actions">
            <button id="btn6" type="button">Permutar</button>
        </div>
    </main>

    <script>
        function permutar(arr) {
            const resultados = [];
            function backtrack(actual, restantes) {
                if (restantes.length === 0) { resultados.push(actual.slice()); return }
                for (let i = 0; i < restantes.length; i++) {
                    actual.push(restantes[i]);
                    const next = restantes.slice(0, i).concat(restantes.slice(i + 1));
                    backtrack(actual, next);
                    actual.pop();
                }
            }
            backtrack([], arr);
            return resultados;
        }

        function formateaPermutaciones(parr) {
            // pasar cada permutación a texto tipo "[1,2,3]"
            const textos = parr.map(p => `[${p.join(',')}]`);
            const lines = [];
            for (let i = 0; i < textos.length; i += 2) {
                // toma máximo 2 por línea
                lines.push(textos.slice(i, i + 2).join(', '));
            }
            // separa párrafos con línea en blanco
            return lines.join('\n\n');
        }

        document.getElementById('btn6').addEventListener('click', () => {
            const txt = document.getElementById('perm_input').value;
            const out = document.getElementById('out6');
            try {
                const arr = JSON.parse(txt);
                if (!Array.isArray(arr)) throw new Error('Se esperaba un array');

                const perms = permutar(arr);         // array de arrays
                const resultadoFormateado = formateaPermutaciones(perms);
                out.textContent = resultadoFormateado;
            } catch (e) {
                out.textContent = 'Error: ' + e.message;
            }
        });
    </script>
</body>
</html>