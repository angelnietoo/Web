<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ejercicio 3 — Filtrar y Transformar</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: system-ui, Arial;
            padding: 16px;
            background: #f7fafc
        }

        .card {
            background: #fff;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e6eef3;
            max-width: 760px
        }

        input,
        select {
            width: 100%;
            padding: 8px;
            font-family: monospace;
            margin-top: 8px
        }

        button {
            margin-top: 8px;
            padding: 8px 12px
        }

        pre {
            background: #0b1220;
            color: #e6eef8;
            padding: 10px;
            border-radius: 6px;
            min-height: 80px
        }
    </style>
</head>

<body>
    <div class="card">
        <h2>Ejercicio 3 — Filtrar y Transformar</h2>
        <p>Introduce números separados por comas y selecciona un preset.</p>
        <input id="nums" value="1,2,3,4,5,6">
        <select id="preset">
            <option value="even_square">Pares → cuadrado</option>
            <option value="odd_double">Impares → *2</option>
            <option value="gt3_cube">> 3 → cubo</option>
        </select>
        <button id="run">Ejecutar</button>
        <h3>Salida</h3>
        <pre id="out"></pre>
    </div>

    <script>
        /*
          filtrarYTransformar devuelve un nuevo array con los elementos de entrada 
          que pasan un filtro y se transforman, combinando .filter() y .map().
        */
        function filtrarYTransformar(arr, filtro, transformacion) {
            return arr.filter(filtro).map(transformacion);
        }

        /*
          Manejador UI que parsea entradas de forma segura, selecciona presets 
          y muestra la salida transformada evitando NaN.
        */
        document.getElementById('run').addEventListener('click', () => {
            const raw = document.getElementById('nums').value;
            const arr = raw.split(',').map(s => Number(s.trim())).filter(x => !isNaN(x));
            const preset = document.getElementById('preset').value;
            let filtro, transformacion;
            if (preset === 'even_square') { filtro = n => n % 2 === 0; transformacion = n => n * n; }
            else if (preset === 'odd_double') { filtro = n => n % 2 !== 0; transformacion = n => n * 2; }
            else { filtro = n => n > 3; transformacion = n => Math.pow(n, 3); }

            const out = filtrarYTransformar(arr, filtro, transformacion);
            document.getElementById('out').textContent =
                'Entrada: ' + JSON.stringify(arr) + '\nSalida: ' + JSON.stringify(out);
        });
    </script>
</body>

</html>